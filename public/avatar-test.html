<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Avatar Generation Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }

        h1 {
            color: #333;
            text-align: center;
        }

        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .avatar-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

        .avatar-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .avatar-img {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            margin: 0 auto 15px;
            display: block;
        }

        .username {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .url {
            font-size: 10px;
            color: #666;
            word-break: break-all;
            margin-top: 10px;
            padding: 8px;
            background: #f9f9f9;
            border-radius: 4px;
        }

        .controls {
            text-align: center;
            margin-bottom: 30px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        input {
            padding: 10px 15px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            width: 300px;
            margin-right: 10px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }

        button:hover {
            background: #0056b3;
        }

        .color-palette {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .color-box {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
        }

        .color-box:hover {
            transform: scale(1.1);
            border-color: #333;
        }
    </style>
</head>

<body>
    <h1>ðŸŽ¨ Default Avatar Generation Test</h1>

    <div class="controls">
        <div>
            <input type="text" id="usernameInput" placeholder="Enter username" value="TestUser">
            <button onclick="addAvatar()">Generate Avatar</button>
            <button onclick="generateSample()">Generate Sample Users</button>
        </div>

        <div class="color-palette">
            <div class="color-box" style="background: #FF6B6B" title="#FF6B6B" onclick="selectColor('FF6B6B')"></div>
            <div class="color-box" style="background: #4ECDC4" title="#4ECDC4" onclick="selectColor('4ECDC4')"></div>
            <div class="color-box" style="background: #45B7D1" title="#45B7D1" onclick="selectColor('45B7D1')"></div>
            <div class="color-box" style="background: #FFA07A" title="#FFA07A" onclick="selectColor('FFA07A')"></div>
            <div class="color-box" style="background: #98D8C8" title="#98D8C8" onclick="selectColor('98D8C8')"></div>
            <div class="color-box" style="background: #F7DC6F" title="#F7DC6F" onclick="selectColor('F7DC6F')"></div>
            <div class="color-box" style="background: #BB8FCE" title="#BB8FCE" onclick="selectColor('BB8FCE')"></div>
            <div class="color-box" style="background: #F8B739" title="#F8B739" onclick="selectColor('F8B739')"></div>
            <div class="color-box" style="background: #52C7B8" title="#52C7B8" onclick="selectColor('52C7B8')"></div>
            <div class="color-box" style="background: #FF7979" title="#FF7979" onclick="selectColor('FF7979')"></div>
            <div class="color-box" style="background: #6C5CE7" title="#6C5CE7" onclick="selectColor('6C5CE7')"></div>
            <div class="color-box" style="background: #A29BFE" title="#A29BFE" onclick="selectColor('A29BFE')"></div>
            <div class="color-box" style="background: #FD79A8" title="#FD79A8" onclick="selectColor('FD79A8')"></div>
            <div class="color-box" style="background: #FDCB6E" title="#FDCB6E" onclick="selectColor('FDCB6E')"></div>
            <div class="color-box" style="background: #74B9FF" title="#74B9FF" onclick="selectColor('74B9FF')"></div>
        </div>
    </div>

    <div id="avatarGrid" class="avatar-grid"></div>

    <script>
        const AVATAR_COLORS = [
            'FF6B6B', '4ECDC4', '45B7D1', 'FFA07A', '98D8C8',
            'F7DC6F', 'BB8FCE', 'F8B739', '52C7B8', 'FF7979',
            '6C5CE7', 'A29BFE', 'FD79A8', 'FDCB6E', '74B9FF'
        ];

        let selectedColor = null;

        function getRandomColor() {
            return AVATAR_COLORS[Math.floor(Math.random() * AVATAR_COLORS.length)];
        }

        function generateDefaultAvatar(name, backgroundColor) {
            const initial = name && name.trim().length > 0
                ? name.trim().charAt(0).toUpperCase()
                : 'U';

            const bgColor = backgroundColor || getRandomColor();

            const params = new URLSearchParams({
                name: initial,
                background: bgColor,
                color: 'ffffff',
                size: '200',
                bold: 'true',
                format: 'png',
            });

            return `https://ui-avatars.com/api/?${params.toString()}`;
        }

        function selectColor(color) {
            selectedColor = color;
            document.querySelectorAll('.color-box').forEach(box => {
                box.style.borderColor = 'transparent';
            });
            event.target.style.borderColor = '#333';
        }

        function addAvatar() {
            const username = document.getElementById('usernameInput').value || 'User';
            const avatarUrl = generateDefaultAvatar(username, selectedColor);

            const grid = document.getElementById('avatarGrid');
            const card = document.createElement('div');
            card.className = 'avatar-card';
            card.innerHTML = `
                <img class="avatar-img" src="${avatarUrl}" alt="${username}">
                <div class="username">${username}</div>
                <div class="url">${avatarUrl}</div>
            `;

            grid.insertBefore(card, grid.firstChild);

            // Reset
            selectedColor = null;
            document.querySelectorAll('.color-box').forEach(box => {
                box.style.borderColor = 'transparent';
            });
        }

        function generateSample() {
            const sampleUsers = [
                'Alice', 'Bob', 'Charlie', 'Diana', 'Edward',
                'Fiona', 'George', 'Hannah', 'Isaac', 'Julia',
                'Kevin', 'Laura', 'Michael', 'Nancy', 'Oliver'
            ];

            document.getElementById('avatarGrid').innerHTML = '';

            sampleUsers.forEach(username => {
                const avatarUrl = generateDefaultAvatar(username);
                const grid = document.getElementById('avatarGrid');
                const card = document.createElement('div');
                card.className = 'avatar-card';
                card.innerHTML = `
                    <img class="avatar-img" src="${avatarUrl}" alt="${username}">
                    <div class="username">${username}</div>
                    <div class="url">${avatarUrl}</div>
                `;
                grid.appendChild(card);
            });
        }

        // Generate sample on load
        window.addEventListener('load', generateSample);
    </script>
</body>

</html>